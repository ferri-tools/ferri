# Ferri OpenRouter Provider Test Plan (Gemma 7B)

This document outlines the steps to test the integration of the OpenRouter provider with the Ferri CLI, specifically using Google's Gemma 7B model.

## Prerequisites

1.  You have an OpenRouter API key. You can get one from the [OpenRouter website](https://openrouter.ai/keys).
2.  The `ferri` CLI is installed and initialized in your project (`ferri init`).

## Testing Steps

### 1. Set the OpenRouter API Key

Store your OpenRouter API key securely using the `ferri secrets` command.

```bash
ferri secrets set OPENROUTER_API_KEY
```

You will be prompted to enter your API key.

### 2. Add the Gemma 7B Model

Next, add the Gemma 7B model to Ferri. You will use the model identifier provided by OpenRouter.

-   **Alias:** `gemma-7b` (a local, friendly name)
-   **Provider:** `openrouter`
-   **Model Name:** `google/gemma-7b-it` (the official ID on OpenRouter)
-   **API Key Secret:** `OPENROUTER_API_KEY` (the secret you just set)

```bash
ferri models add gemma-27b \
  --provider openrouter \
  --model-name "google/gemma-3-27b-it" \
  --api-key-secret OPENROUTER_API_KEY
```

**Note:** The model name needs to be in quotes if your shell interprets the `/` character.

### 3. Verify the Model was Added

Confirm that the model was added successfully by listing your available models:

```bash
ferri models ls
```

You should see `gemma-27b` in the list.

### 4. Test the Model

Now, use the model with a simple prompt using `ferri with`.

```bash
ferri with --model gemma-27b -- "In one sentence, what is the Gemma model series?"
```

**Expected Output:**
You should see a concise, one-sentence answer describing the Gemma models, generated by the model itself.

## Summary

If you can successfully complete all of the steps above, the OpenRouter provider integration is working correctly.

```